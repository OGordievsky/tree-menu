<html>
<ul class="nested" th:fragment="menu (menuItemsList)">
    <li th:fragment="nestedMenu (menuItemsList)" th:each="menuItem:${menuItemsList}">
        <span th:classappend ="${not #lists.isEmpty(menuItem.children)} ? arrow : null"  th:text="${menuItem.name}"></span>
        <section th:replace="menuFragment :: menu (menuItemsList=${menuItem.children})"></section>
    </li>
</ul>
</html>